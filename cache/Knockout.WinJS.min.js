var WinJS;!function(a){!function(b){function c(c){return a.Binding.initializer(function(a,d,e,f){return b.defaultBind(a,d,e,f,c)})}function d(a){return a}function e(c,e,f,g,h,i,j){i=i||d;var k,l=a.Binding.converter(function(d){var j=d;if(h instanceof A&&h.convert instanceof Function)if(h.isComputed){var l=b.computed(function(){return h.convert(a.Binding.as(d),c,e,f,g)});j=l.value;var m=function(a){x(f,g,a,i)};l.bind("value",m),k=function(){l.unbind("value",m),l.dispose()}}else j=h.convert(d,c,e,f,g);return i(j)})(c,e,f,g);return j?new z(l,j,k):l}function f(a,b,c,d){return e(a,b,c,["style","display"],d,function(a){return a?"":"none"})}function g(b,c,d,f,g){var h,i=d.winControl;i||"WinJS.KO.FlowControl"!=d.getAttribute("data-win-control")||(i=h=new a.KO.FlowControl(d,{converter:f}));return i?(i.type=g,i.source=b,e(b,c,d,["winControl","data"],f,void 0,function(){h&&h.dispose()})):new z}function h(a,b,c,d){return g(a,b,c,d,"foreach")}function i(a,b,c,d){return g(a,b,c,d,"with")}function j(a,b,c,d){return g(a,b,c,d,"if")}function k(a,b,c,d){return g(a,b,c,d,"ifnot")}function l(b,c,d,f,g){function h(a,b){a=a||{};for(var c in a){var d=a[c];"function"==typeof d&&b(c)}}function i(){h(d._winjs_ko_eventBind,function(a){d.removeEventListener(a,j)})}function j(a){var b=d._winjs_ko_eventBind[a.type];!0!==b.apply(k,[k,a])&&a.preventDefault()}var k=D.isObservableDataContext(b)?a.Binding.unwrap(b.$data):b;return e(b,c,d,["_winjs_ko_eventBind"],f,function(a){var b=g(a)||{};return i(),h(b,function(a){d.addEventListener(a,j)}),b},i)}function m(a,b,c,d){return l(a,b,c,d,function(a){return{click:a}})}function n(a,b,c,d){return l(a,b,c,d,function(a){return a})}function o(a,b,c,d){return l(a,b,c,d,function(a){return{submit:a}})}function p(a,b,c,d){return e(a,b,c,["disabled"],d,function(a){return!a})}function q(a,b,c,d,e,f){function g(){var a=e instanceof Function?e:e&&e.convertBack;x(b,c,f(d),a)}return a.forEach(function(a){d.addEventListener(a,g)}),function(){a.forEach(function(a){return d.removeEventListener(a,g)})}}function r(a,b,c,d){return e(a,b,c,["value"],d,void 0,q(["input"],a,b,c,d,function(a){return a.value}))}function s(a,b,c,d){function f(a){return a.ownerDocument.activeElement==a}return e(a,b,c,["_winjs_ko_hasFocus"],d,function(a){var b=f(c);return a!=b&&(a?c.focus():c.blur()),a},q(["focus","blur"],a,b,c,d,f))}function t(c,d,f,g){function h(c){return"INPUT"!=f.tagName?!1:"checkbox"==f.type?c instanceof Array||c instanceof a.Binding.List?b.isObservableArray(c)?c.array.indexOf(f.value)>=0:c.indexOf(f.value)>=0:c:"radio"==f.type?c==f.value:!1}var i=function(b,c){if("checkbox"==f.type&&(c instanceof Array||c instanceof a.Binding.List)){var d=c.indexOf(f.value);return b&&0>d?c.push(f.value):!b&&d>=0&&c.splice(d,1),c}return"radio"==f.type?b?f.value:c==f.value?void 0:c:b};return g instanceof A||(g=new A(h,i,!0)),e(c,d,f,["checked"],g,void 0,q(["change"],c,d,f,g,function(a){return a.checked}))}function u(b,d,e,f){var h=document.createElement("div");h.innerHTML='<option data-win-bind="$option : $data"/>';var i=new a.Binding.Template(h);i.bindingInitializer=c(f);var j=new a.KO.FlowControl(e,{template:i}),k=g(b,d,e,void 0,"foreach");return new z(k,function(){j.dispose()})}function v(a,b,c,d){function f(a){a&&(c.value=a.value||a.text,c.text=a.text)}var g=d&&d.convert||function(a){return"object"==typeof a?{value:a.value,text:a.text}:{text:a}},h=new A(function(a){var b=g(a);return f(b),b},void 0,!0);return e(a,b,c,["_winjs_ko_option"],h)}function w(c,f,g,h){function i(a){for(var b=g.firstElementChild;b;){if("OPTION"==b.tagName){var c=b;c.selected=a.indexOf(c.value)>=0}b=b.nextElementSibling}}function j(a){for(var b=[],c=a.firstElementChild;c;){if("OPTION"==c.tagName){var d=c;d.selected&&b.push(d.value)}c=c.nextElementSibling}return b}function k(b,c){var e=h&&h.convertBack||d,f=e(b);return c instanceof Array||c instanceof a.Binding.List?(c.splice(0,c.length),c.push.apply(c,f),c):f}var l=new A(function(a){var c=h&&h.convert||d,e=c(a);return b.isObservableArray(e)&&(e=a.array),e},void 0,!0);return e(c,f,g,["_winjs_ko_selectedOptions"],l,i,q(["change"],c,f,g,k,j))}function x(a,b,c,d){for(var e=0,f=b.length-1;f>e;e++)if(a=a[b[e]],!a)return;if(b.length>0){var g=b[b.length-1];d&&(c=d(c,a[g],a,b)),a[g]=c}else d(c,a,a,b)}var y={$foreach:h,$if:j,$ifnot:k,$with:i,$event:n,$click:m,$submit:o,$value:r,$checked:t,$hasFocus:s,$selectedOptions:w,$visible:f,$enabled:p,$options:u,$option:v};b.defaultBind=a.Binding.initializer(function(a,b,c,d,f){var g=a;if(d.length>0&&C[b[0]]){var h=D.getDataContextFromElement(c);h&&(g=h)}if(d||1==d.length){var i=d[0];if(y[i])return y[i](g,b,c,f)}return e(g,b,c,d,f)});var z=function(){function a(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._innerCancelables=a}return a.prototype.cancel=function(){this._innerCancelables&&this._innerCancelables.forEach(function(a){a instanceof Function?a():a&&a.cancel instanceof Function&&a.cancel()})},a}(),A=function(){function a(a,b,c){this.convert=a,this.convertBack=b,this.isComputed=c}return a}();b.converter=function(a,b){return c(new A(a,b,!1))},b.computedConverter=function(a,b){return c(new A(a,b,!0))},b.negConverter=b.converter(function(a){return!a});var B=function(){function b(b,c){function d(b){var c=document.createElement("div");c.innerHTML=b.innerHTML;for(var d=b.querySelectorAll("[data-win-bind]"),e=0;e<d.length;e++)d.item(e).attributes.removeNamedItem("data-win-bind");for(;b.hasChildNodes();)b.removeChild(b.lastChild);var f=new a.Binding.Template(c);return f.bindingInitializer=a.KO.defaultBind,c.isDeclarativeControlContainer=!0,f}this.dispose=function(){this._disposeChildren()},c=c||{},b.winControl||(this._data=c.data,this._template=c.template||d(b),this._type=c.type,this._source=c.source,this.element=b,b.winControl=this,this.reload())}return b.prototype.reload=function(){var b=this,c=function(a,c,d,e){var f=document.createElement("div");if(!a)return f;if(c){var g=D.createObservableDataContext(a,d);arguments.length>=4&&g.addProperty("$index",e),f._winjs_ko_dataContext=g}b._template.render(a,f);var h;return 1==f.childElementCount?(h=f.firstElementChild,f.removeChild(h),h._winjs_ko_dataContext=f._winjs_ko_dataContext):h=f,h._winjs_ko_dispose=function(){f.dispose&&f.dispose()},h},d=function(a,d,e){var f=c(a,d,e);b.element.appendChild(f)};if(this._disposeChildren(),this._template)switch(this._type){case"if":this._data&&d(this._source,!1);break;case"ifnot":this._data||d(this._source,!1);break;case"with":d(this._data,!0,this._source);break;case"foreach":var e=this._source,f=function(d){if(d instanceof Array||d instanceof a.Binding.List){var f=d.map(function(a,d){for(var f=b.element.firstChild;f&&f._winjs_ko_dataItem!=a;)f=f.nextSibling;return f?b.element.removeChild(f):(f=c(a,!0,e,d),f._winjs_ko_dataItem=a),f});b._disposeChildren(),f.forEach(function(a,c){a._winjs_ko_dataContext.$index=c,b.element.appendChild(a)})}};a.KO.isObservableArray(this._data)?this._data.bind("_array",f):f(this._data)}},Object.defineProperty(b.prototype,"data",{get:function(){return this._data},set:function(a){a!==this._data&&(this._data=a,this.reload())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"template",{get:function(){return this._template},set:function(a){a!==this._template&&(this._template=a,this.reload())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"type",{get:function(){return this.type},set:function(a){a!==this._type&&(this._type=a,this.reload())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"source",{get:function(){return this._source},set:function(a){a!==this._source&&(this._source=a,this.reload())},enumerable:!0,configurable:!0}),b.prototype._disposeChildren=function(){for(;this.element.childElementCount>0;){var a=this.element.lastElementChild,b=a._winjs_ko_dispose;"function"==typeof b&&b();var c=a._winjs_ko_dataContext;c&&"function"==typeof c.dispose&&c.dispose(),this.element.removeChild(a)}},b.cctor=function(){a.Utilities.markSupportedForProcessing(b),b.isDeclarativeControlContainer=!0}(),b}();b.FlowControl=B;var C={$parent:!0,$parents:!0,$root:!0,$data:!0,$index:!0,$parentContext:!0,$rawData:!0,$element:!0,$context:!0},D=function(){function c(){}return c.prototype.data=function(b){this.$data=b,this.$rawData=b instanceof a.Binding.List?a.KO.getRawArray(b):a.Binding.unwrap(b)},c.isObservableDataContext=function(b){return b&&a.Binding.unwrap(b)instanceof c},c.getDataContextFromElement=function(a){for(var b=a;b&&!c.isObservableDataContext(b._winjs_ko_dataContext);)b=b.parentElement;return b?b._winjs_ko_dataContext:null},c.createObservableDataContext=function(a,d){var e=new c;e.data(a),d?(e.$parentContexts=[d],e.$parentContext=d):e.$parentContexts=[];var f=b.observable(e);return c.isObservableDataContext(d)?(e.$parentContexts.concat(d.$parentContexts),f.addComputedProperty("$parents",function(){return f.peek("$parentContexts").map(function(a){return a.$data})}),f.addComputedProperty("$parent",function(){return f.peek("$parentContext").$data}),f.addComputedProperty("$root",function(){var a=f.peek("$parentContexts");return a.length>0?a[a.length-1].$data:void 0})):(f.$parents=[d],f.$parent=d,f.$root=d),f},c}();!function(){a.Utilities.markSupportedForProcessing(b.defaultBind)}()}(a.KO||(a.KO={}));a.KO}(WinJS||(WinJS={}));var WinJS;!function(a){!function(b){function c(b){function c(){d=new l;var a=f._array;f._array=e(f),f.notify("_array",f._array,a)}var d,b=b||[],f=new a.Binding.List(b);return f.addEventListener("itemchanged",c),f.addEventListener("iteminserted",c),f.addEventListener("itemmoved",c),f.addEventListener("itemmutated",c),f.addEventListener("itemremoved",c),f.addEventListener("reload",c),f._lastUpdatedStamp=function(){return d},f._array=e(f),Object.defineProperty(f,"array",{get:function(){var a=k.currentContext();return a&&g(f,"_array"),f._array},enumerable:!0,configurable:!0}),f}function d(b){return b instanceof a.Binding.List&&b._array instanceof Array}function e(b){return b instanceof a.Binding.List?b.map(function(a){return a}):void 0}function f(a){a.addComputedProperty=function(a,c,d,e){this.addProperty(a),b.computed(c,d,e,this,a)};var c=a.getProperty;a.getProperty=function(a){return g(this,a),c.call(this,a)};var d=a.updateProperty;a.updateProperty=function(a,b,c){this._lastUpdatedStamp(a,c||l.newStamp()),d.call(this,a,b)};var e=a.setProperty;a.setProperty=function(a,b){var c=this._computedProperty(a);if(c){if(c._computedWriter)return void c._computedWriter(b);throw new Error("Cannot write a value to a computed observable property unless you specify a 'write' option.")}return e.call(this,a,b)},a._removeAllDependencies=function(a){var b=this._computedProperty(a);if(b){var c=b._dependencies||[];c.forEach(function(a){a._observable.unbind(a._propertyName,b._computedUpdater)}),b._dependencies=[]}};var f=a.dispose;a.dispose=function(a){var b=this;if(arguments.length>0){var c=this._computedProperty(a);c&&(c._removeAllDependencies(),c._computedUpdater=null,c._computedWriter=null,delete this._computedProperties[a])}else f&&f.call(this),Object.keys(this).forEach(function(a){b.dispose(a)})},a._lastUpdatedStamps={},a._lastUpdatedStamp=function(a,b){return this._lastUpdatedStamps=this._lastUpdatedStamps||{},1==arguments.length?this._lastUpdatedStamps[a]:void(arguments.length>1&&(this._lastUpdatedStamps[a]=b))},a._computedProperties={},a._computedProperty=function(a){return this._computedProperties[a]},a.peek=function(a){return c.call(this,a)},a.computed=function(a,c,d,e){b.computed(c,d,e,this,a)},a.getDependenciesCount=function(a){var b=this._computedProperty(a);return b&&b._dependencies?b._dependencies.length:0}}function g(a,b){var c=k.currentContext();if(c&&c.type==j.TYPE_COMPUTED_EVALUATIOR){var d=c.observableProperty;if(!d||d._observable===a&&d._propertyName==b)return;var e=d._observable._computedProperty(d._propertyName),f=new h(a,b),g=e._dependencies||[];g.some(function(a){return a===f})||g.push(f),e._dependencies=g}}b.observable=function(b){var c="object"==typeof b?b:new m(b);if(c){var d=a.Binding.as(c);return f(d),d}return c},b.computed=function(a,c,d,e,f){var g=a;if(a&&"object"==typeof a?(d=a||{},g=d.read):(d=d||{},g||(g=d.read)),"function"!=typeof g)throw new Error("Pass a function that returns the value of the computed function.");var m,n;e?(m=e,n=f):(m=b.observable(0),n="value"),c=c||d.owner||m;var o,p=function(){return g.call(c)};m.dispose&&m.dispose(n);var q=new i;m._computedProperties[n]=q;var r=function(){var a=k.currentContext();if(!a||a.type!=j.TYPE_COMPUTED_DEPENDENCY_BIND){q._removeAllDependencies();var b;k.execute(new j(j.TYPE_COMPUTED_EVALUATIOR,new h(m,n)),function(){b=p()});var c=q._dependencies||[];k.execute(new j(j.TYPE_COMPUTED_DEPENDENCY_BIND),function(){c.forEach(function(a){a._observable.bind(a._propertyName,r)})});var d=new l(new Date(0));if(c.forEach(function(a){var b=a._observable._lastUpdatedStamp(a._propertyName);b&&d.lessThan(b)&&(d=b)}),m._lastUpdatedStamp){var e=m._lastUpdatedStamp(n);(!e||e.lessThan(d))&&m.updateProperty(n,b,d)}else m[n]=b;return b}},s=d.write;s&&"function"==typeof s&&(q._computedWriter=function(a){s.call(c,a)}),q._computedUpdater=r,"function"==typeof m._lastUpdatedStamp&&m._lastUpdatedStamp(n,null);r();return m==e?o:m},b.observableArray=c,b.isObservableArray=d,b.getRawArray=e;var h=function(){function a(a,b){this._observable=a,this._propertyName=b}return a}(),i=function(){function a(){this._dependencies=[]}return a.prototype._removeAllDependencies=function(){var a=this._computedUpdater;this._dependencies.forEach(function(b){b._observable.unbind(b._propertyName,a)}),this._dependencies=[]},a}(),j=function(){function a(b,c){this.type=b,b==a.TYPE_COMPUTED_EVALUATIOR?this.observableProperty=c:this.upateStamp=c}return a.TYPE_COMPUTED_EVALUATIOR=0,a.TYPE_COMPUTED_DEPENDENCY_BIND=1,a.TYPE_WRITER_INITIAL_RUN=2,a.COMPUTED_WRITER=3,a}(),k=function(){function a(){}return a.execute=function(b,c){try{var d=a._currentContext;a._currentContext=b,c()}finally{a._currentContext=d}},a.currentContext=function(){return a._currentContext},a.contextStack=[],a}(),l=function(){function a(a,b){this.timeStamp=a||new Date,this.index=b||0}return a.prototype.lessThan=function(a){return this.timeStamp<a.timeStamp||this.timeStamp<a.timeStamp&&this.index<a.index},a.newStamp=function(){var b=new a;return b.timeStamp==a._lastUpdateStamp.timeStamp&&b.index==a._lastUpdateStamp.index+1,a._lastUpdateStamp=new a(b.timeStamp,b.index),b},a._lastUpdateStamp=new a,a}(),m=function(){function a(a){this.value=a}return a}()}(a.KO||(a.KO={}));a.KO}(WinJS||(WinJS={}));